# íŒŒì¼ì— ë°ì´í„° ì €ì¥í•˜ê¸° #

### 1. í”„ë¡œê·¸ë¨ì€ ë°ì´í„°ë¥¼ ë§Œë“­ë‹ˆë‹¤ ###
ì´ì „ ì±•í„°ì˜ ì†ŒìŠ¤ë¥¼ ì‘ìš©í•˜ì—¬..

1. manì´ë¼ëŠ” ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“­ë‹ˆë‹¤
2. otherë¼ëŠ” ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“­ë‹ˆë‹¤
3. line-spoken ë³€ìˆ˜ì—ì„œ ë¶ˆí•„ìš”í•œ ê³µë°± ë¬¸ìë¥¼ ì œê±°í•©ë‹ˆë‹¤
4. role ê°’ì— ë”°ë¼ line_spokenì„ ì˜¬ë°”ë¥¸ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•©ë‹ˆë‹¤
5. manê³¼ other ë¦¬ìŠ¤íŠ¸ë¥¼ ê°ê¸° í™”ë©´ì— ì¶œë ¥í•©ë‹ˆë‹¤


  	man = []
	other = []
	
	try:
	    data = open('sketch.txt')
	
		for each_line in data:
	    	try:
	            (role, line_spoken) = each_line.split(':', 1)
	            line_spoken = line_spoken.strip()
	            if role == 'Man':
	                man.append(line_spoken)
	            elif role == 'Other Man':
	                other.append(line_spoken)
	        except ValueError:
	            pass
	
	    data.close()
	except IOError:
	    print('The datafile is missing!')
	
	print(man)
	print(other)

### 2. ì“°ê¸°ëª¨ë“œë¡œ íŒŒì¼ ì—´ê¸° ###

#### ì“°ê¸°ëª¨ë“œë¡œ íŒŒì¼ì„ ì—´ ê²½ìš° open í•¨ìˆ˜ ì´ìš©ì‹œ 'w'ì¸ìë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤ ####
out= open("data.out", **"w"**)
#### íŒŒì¼ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„  print í•¨ìˆ˜ì—ì„œ file íŒŒë¼ë¯¸í„°ì— openì— ì‚¬ìš©í•œ ê°œì²´ë¥¼ ë˜ì ¸ ì¤ë‹ˆë‹¤
print("ì•ˆë…•í•˜ì„¸ìš”?", file=**out**)
#### ì‘ì—…ì„ ë§ˆì¹œí›„ì—ëŠ” íŒŒì¼ì„ ë‹«ìŠµë‹ˆë‹¤. (í”ŒëŸ¬ì‹±) ####
out.close()

#### ì‹¤ìŠµ ####
ìœ„ì˜ ì†ŒìŠ¤ì—ì„œ í• ë‹¹ëœ man, other ê°œì²´ë¥¼ ê°ê° man_data.txt , other_data.txt íŒŒì¼ì— ì €ì¥í•˜ì„¸ìš”

    try:
    	man_file = open('man_data.txt', 'w')
    	other_file = open('other_data.txt', 'w')
    
    	print(man, file=man_file)
    	print(other, file=other_file)
    
    	man_file.close()
    	other_file.close()

    except IOError:
    	print('File error.')

### 3. ì˜ˆì™¸ê°€ ë°œìƒëœ í›„ì—ë„ íŒŒì¼ì€ ì—¬ì „íˆ ì—´ë ¤ ìˆìŠµë‹ˆë‹¤ ###
tryë¬¸ ì•ˆì—ì„œ ì˜ˆì™¸ìƒí™©ì´ ë°œìƒí–ˆì„ ê²½ìš° ì»¤ì„œëŠ” exceptë¬¸ìœ¼ë¡œ í–¥í•˜ë©° ì˜ˆì™¸ìƒí™©ì´ ë°œìƒí•œ ì´í›„ì˜ ë¼ì¸ì€ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

    try:
    	man_file = open('man_data.txt', 'w')
    	other_file = open('other_data.txt', 'w')
    
    	print(man, file=man_file)
    	print(other, file=other_file)	# ì—ëŸ¬ !!!    		

    	man_file.close()				# ì‹¤í–‰ì•ˆë¨
    	other_file.close()				# ì‹¤í–‰ì•ˆë¨

    except IOError:
    	print('File error.')

### 4. tryë¬¸ì„ finallyë¡œ í™•ì¥í•˜ê¸° ###
ì˜ˆì™¸ ìƒí™©ì´ ìˆë”ë¼ë„ ë°˜ë“œì‹œ ì‹¤í–‰ì´ ë˜ì–´ì•¼ í•˜ëŠ” ì½”ë“œëŠ” finallyë¬¸ì•ˆì— ì‘ì„±í•©ë‹ˆë‹¤.

    try:
    	man_file = open('man_data.txt', 'w')
    	other_file = open('other_data.txt', 'w')
    
		print(man, file=man_file)
    	print(other, file=other_file)
    
    except IOError:
    	print('File error.')
    
	finally:
     	man_file.close()
     	other_file.close()

### 5. ì—ëŸ¬ì˜ ì¢…ë¥˜ë¥¼ ì•„ëŠ” ê²ƒë§Œìœ¼ë¡œëŠ” ì¶©ë¶„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤ ###
íŒŒì¼ì„ ì €ì¥í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ëŠ” ì˜ˆì¸¡í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.

1. ë””ìŠ¤í¬ I/O ì—ëŸ¬ (ë² ë“œì„¹í„°) ??
2. ë””ìŠ¤í¬ ìš©ëŸ‰ Full ??
3. USBë¥¼ ì½”ë“œ ì‘ë™ ì¤‘ê°„ì— ë½‘ì•„ ë²„ë ¸ë‹¤ ??
4. ê¸°íƒ€ ë“±ë“±

#### ìš°ë¦¬ëŠ” ì•Œ ìˆ˜ ì—†ì§€ë§Œ íŒŒì´ì¬ ì¸í„°í”„ë¦¬í„°ëŠ” ì•Œê³  ìˆìŠµë‹ˆë‹¤. ####
ì‹¤ì œë¡œ ë””ìŠ¤í¬ì— ì—†ëŠ” íŒŒì¼(missing.txt)ì„ ì—´ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” ì—ëŸ¬ë¥¼ ì‚´í´ ë³´ê² ìŠµë‹ˆë‹¤.

	try:
		data = open('missing.txt')
		print(data.readline(), end='')
	except IOError:
		print('File Error')
	finally:
		data.close()
	
ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.

	Traceback (most recent call last):
	  File "C:\workspace\Python33\PythonStudy2013\ch04.py", line 7, in <module>
	File Error
	    data.close()
	NameError: name 'data' is not defined

ì½”ë“œë¥¼ ì‚´í´ë³´ë©´ open í•¨ìˆ˜ ì‚¬ìš©ì‹œ ë””ìŠ¤í¬ì— ì—†ëŠ” íŒŒì¼ì„ ì—´ì—ˆê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ì—¬ dataë¼ëŠ” ê°œì²´ë¥¼ í• ë‹¹í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ê·¸ í›„ exceptë¬¸ì— ìˆëŠ” 'File Error'ë¥¼ ì¶œë ¥í•˜ê³  finally ë¬¸ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ê·¸ëŸ°ë° í• ë‹¹ë˜ì§€ ì•Šì€ data ê°œì²´ë¥¼ close() í•˜ê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•œ ê²ƒ ì…ë‹ˆë‹¤.

ê·¸ëŸ¬ë¯€ë¡œ finally ë¬¸ì— locals() í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ 'data' ë¼ëŠ” ì´ë¦„ì´ ì¡´ì¬í•˜ëŠ”ì§€ ì²´í¬í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

	try:
		data = open('missing.txt')
		print(data.readline(), end='')
	except IOError:
		print('File Error')
	finally:
		if 'data' in locals():
			data.close()

locals() í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ finallyë¬¸ì—ì„œì˜ ì—ëŸ¬ ìƒí™©ì€ ì²˜ë¦¬ í–ˆìœ¼ë‚˜ ì•„ì§ ì—ëŸ¬ì˜ ì›ì¸ì€ ì•Œì§€ ëª»í•©ë‹ˆë‹¤. ì—ëŸ¬ì˜ ì›ì¸ì„ ì•Œê¸° ìœ„í•´ íŒŒì´ì¬ ì¸í„°í”„ë¦¬í„°ê°€ ì•Œê³  ìˆëŠ” ì—ëŸ¬ ìƒí™©ì„ ì¶œë ¥í•´ ë³´ë„ë¡ í•©ë‹ˆë‹¤.

	try:
		data = open('missing.txt')
		print(data.readline(), end='')
	except IOError as err:		
		print('File Error: ' + err)
	finally:
		if 'data' in locals():
			data.close()

ê·¸ëŸ°ë° ë˜ ë‹¤ë¥¸ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.

	Traceback (most recent call last):
	  File "C:\workspace\Python33\PythonStudy2013\ch04.py", line 5, in <module>
	    print('File Error: ' + err)
	TypeError: Can't convert 'FileNotFoundError' object to str implicitly

ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ì‚´í´ë³´ë‹ˆ Type Convert ì—ëŸ¬ ì…ë‹ˆë‹¤. ì˜ˆì™¸ ê°œì²´ëŠ” ë¦¬ìŠ¤íŠ¸í˜•ê³¼ ë‹¬ë¦¬ ë°”ë¡œ print()í•¨ìˆ˜ë¡œ ì¶œë ¥ì´ ë˜ì§€ ì•Šì€ ëª¨ì–‘ì…ë‹ˆë‹¤. str() í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ í˜•ë³€í™˜ì„ í•´ ì¤ë‹ˆë‹¤.

	try:
		data = open('missing.txt')
		print(data.readline(), end='')
	except IOError as err:		
		print('File Error: ' +  str(err))
	finally:
		if 'data' in locals():
			data.close()

ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

	File Error: [Errno 2] No such file or directory: 'missing.txt'

ì´ì œ [Err No 2]ë¼ëŠ” ì½”ë“œì˜ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 6. withë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ ì‘ì—…í•˜ê¸° ###
ì¼ë°˜ì ìœ¼ë¡œ try / except / finally íŒ¨í„´ì„ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ withë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œì˜ ì–‘ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

	try:
		data = open('its.txt' , "w")
		print("It is ... ", file=data)
	except IOError as err:		
		print('File error: ' + str(err))
	finally:
		if 'data' in locals():
			data.close()

ìœ„ ì½”ë“œëŠ” ì•„ë˜ì˜ ì½”ë“œì™€ ë™ì¼í•œ ì‘ë™ì„ í•©ë‹ˆë‹¤

	try:
		with open('its.txt' , "w") as data:
			print("It is ... ", file=data)
	except IOError as err:		
		print('File error: ' + str(err))

ì´ì²˜ëŸ¼ with ë¬¸ì„ ì‚¬ìš©í•˜ë©´ íŒŒì¼ì„ ë‹«ì„ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. íŒŒì´ì¬ ì¸í„°í”„ë¦¬í„°ê°€ ìë™ìœ¼ë¡œ íŒŒì¼ì„ ì²˜ë¦¬í•´ ì¤ë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ ê°œì¸ì ìœ¼ë¡  try / except / finally ë¥¼ ë” ì„ í˜¸ í•©ë‹ˆë‹¤. íŒŒì´ì¬ì´ ì•„ë¬´ë¦¬ ì§§ì€ ì½”ë“œê°€ ì¥ì ì´ë¼ í•˜ì§€ë§Œ ëª…ì‹œì ì¸ ì½”ë“œê°€ ê°€ë™ì„±ì´ë‚˜ ì—ëŸ¬ ìƒí™© ëŒ€ì²˜ì— ë” ìœ ë¦¬í•˜ë‹¤ê³  ìƒê° ë©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì€ ì–´ë–¤ ë°©ë²•ì„ ì¢‹ì•„í• ì§€ëŠ”...??

#### ì‹¤ìŠµ ####

    try:
    	man_file = open('man_data.txt', 'w')
    	other_file = open('other_data.txt', 'w')
    
		print(man, file=man_file)
    	print(other, file=other_file)
    
	except IOError as err:		
		print('File error: ' + str(err))
    
	finally:
		if 'man_file' in locals():
	     	man_file.close()
		if 'other_file' in locals():
     		other_file.close()

ìœ„ì˜ ì†ŒìŠ¤ë¥¼ withë¬¸ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ì¬ì‘ì„± í•˜ì‹­ì‹œìš”.

    try:
		with open('man_data.txt', 'w') as man_file:
			print(man, file=man_file)
    	with open('other_data.txt', 'w') as other_file:
	    	print(other, file=other_file)
    
	except IOError as err:		
		print('File error: ' + str(err))

ì½¤ë§ˆ(,)ë¥¼ ì‚¬ìš©í•˜ì—¬ 2ê°œì˜ with ë¬¸ì„ 1ê°œì˜ with ë¬¸ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

    try:
		with open('man_data.txt', 'w') as man_file, open('other_data.txt', 'w') as other_file:
			print(man, file=man_file)
	    	print(other, file=other_file)
    
	except IOError as err:		
		print('File error: ' + str(err))

### 7. ê¸°ë³¸í˜•ì‹ì´ ë§ì§€ ì•Šë„¤ìš” ###
withë¬¸ì„ ì‚¬ìš©í•˜ì—¬ man_data.txt íŒŒì¼ì„ ì½ê³  ì¶œë ¥í•´ ë³´ê² ìŠµë‹ˆë‹¤

	with open('man_data.txt') as mdf:
    	print(mdf.readline())      

ë‹¤ìŒê³¼ ê°™ì´ ì¶œë ¥ ë©ë‹ˆë‹¤.

	['Is this the right room for an argument?', "No you haven't!", 'When?', "No you didn't!", "You didn't!", 'You did not!', 'Ah! (taking out his wallet and paying) Just the five minutes.', 'You most certainly did not!', "Oh no you didn't!", "Oh no you didn't!", "Oh look, this isn't an argument!", "No it isn't!", "It's just contradiction!", 'It IS!', 'You just contradicted me!', 'You DID!', 'You did just then!', '(exasperated) Oh, this is futile!!', 'Yes it is!']

ë°ì´í„°ê°€ 1ì¤„ë¡œ ê¸¸ê²Œ ë‚˜ì—´ëœ ê²ƒì´ ì½ê¸°ê°€ ë„ˆë¬´ ì–´ë µì£ ? 2ì¥ì—ì„œ ì¨ë¨¹ì—ˆë˜ print_lol() í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ë³´ê² ìŠµë‹ˆë‹¤.

	def print_lol(the_list, indent=False, level=0):
	    for each_item in the_list:
	        if isinstance(each_item, list):
	            print_lol(each_item, indent, level+1)
	        else:
	            if indent:
	                for tab_stop in range(level):
	                    print("\t", end='')
	            print(each_item)

ìœ„ í•¨ìˆ˜ì— ë„¤ë²ˆì§¸ ì¸ìë¥¼ ë°›ì•„ ë°ì´í„°ë¥¼ ì“¸ ê³³ì„ ì§€ì •í•©ë‹ˆë‹¤. ë””í´íŠ¸ ê°’ì€ sys.stdout ìœ¼ë¡œ ì§€ì •í•©ë‹ˆë‹¤.
	
	import sys

	def print_lol(the_list, indent=False, level=0, fh=sys.stdout):
	    for each_item in the_list:
	        if isinstance(each_item, list):
	            print_lol(each_item, indent, level+1, fh)
	        else:
	            if indent:
	                for tab_stop in range(level):
	                    print("\t", end='', file=fh)
	            print(each_item, file=fh)

### 8. ë°ì´í„° í”¼í´ë§ í•˜ê¸° ###
íŒŒì´ì¬ì€ í”¼í´(pickle)ì´ë¼ê³  í•˜ëŠ” ë¦¬ìŠ¤íŠ¸ ë¿ë§Œì´ ì•„ë‹Œ ëª¨ë“  íŒŒì´ì¬ ë°ì´í„° ê°œì²´ë¥¼ ì €ì¥í•˜ê³  ì½ì„ ìˆ˜ ìˆëŠ” í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
#### dumpë¡œ ì €ì¥í•˜ê³  loadë¡œ ì½ìŠµë‹ˆë‹¤. ####

	try:
	    with open('man_data.txt', 'w') as man_file, open('other_data.txt', 'w') as other_file:
	        print_lol(man, fh=man_file)
	        print_lol(other, fh=other_file)
	
	except IOError as err:      
	    print('File error: ' + str(err))

ìœ„ ì½”ë“œë¥¼ í”¼í´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ì„ ì‚¬ìš©í•˜ë„ë¡ ë°”ê¾¸ì–´ ë³´ê² ìŠµë‹ˆë‹¤.

	import pickle

	try:
	    with open('man_data.txt', 'wb') as man_file, open('other_data.txt', 'wb') as other_file:
	        pickle.dump(man, man_file)
	        pickle.dump(other, other_file)
	
	except IOError as err:      
    	print('File error: ' + str(err))

	except pickle.PickleError as perr:      
    	print('Picking error: ' + str(perr)) 

ê°ê°ì˜ íŒŒì¼ì„ ì—´ì–´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

	Â€]q (X'   Is this the right room for an argument?qX   No you haven't!qX   When?qX   No you didn't!qX   You didn't!qX   You did not!qX=   Ah! (taking out his wallet and paying) Just the five minutes.qX   You most certainly did not!qX   Oh no you didn't!q	X   Oh no you didn't!qX    Oh look, this isn't an argument!qX   No it isn't!qX   It's just contradiction!qX   It IS!qX   You just contradicted me!qX   You DID!qX   You did just then!qX"   (exasperated) Oh, this is futile!!qX   Yes it is!qe.
	Â€]q (X   I've told you once.qX   Yes I have.qX	   Just now.qX   Yes I did!qX   I'm telling you, I did!qXD   Oh I'm sorry, is this a five minute argument, or the full half hour?qX!   Just the five minutes. Thank you.qX   Anyway, I did.qX@   Now let's get one thing quite clear: I most definitely told you!q	X   Oh yes I did!qX   Oh yes I did!qX   Yes it is!qX   No it isn't!qX   It is NOT!qX   No I didn't!qX	   No no no!qX	   Nonsense!qX   No it isn't!qe.

íŒŒì¼ì˜ ë‚´ìš©ì´ ì´ìƒí•˜ì£ ? ì´ëŠ” íŒŒì¼ì„ í…ìŠ¤íŠ¸ íŒŒì¼ì˜ í˜•íƒœê°€ ì•„ë‹Œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì˜ í˜•íƒœë¡œ ì €ì¥í–ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. í…ìŠ¤íŠ¸ íŒŒì¼ì€ ì‹¤ì œë¡œ íŒŒì¼ì˜ ë‚´ìš©ê³¼ ë”ë¶ˆì–´ í—¤ë” ë“±ì˜ ë‹¤ë¥¸ ì •ë³´ë„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. í”¼í´ì€ ì´ëŸ¬í•œ íŒŒì¼ì˜ ì›ë³¸í˜•íƒœì˜ í˜•ì‹ì„ ì·¨í•˜ê³  ìˆìœ¼ë©°, ì´ë¥¼ dump()ë¡œ ì €ì¥í•˜ê³  load()ë¡œ ì½ëŠ” ê²ƒì…ë‹ˆë‹¤.

ì´ê²ƒì €ê²ƒ ê·€ì°®ë‹¤ í•˜ë©´..<br>
**printë¡œ ì €ì¥ì„ í–ˆìœ¼ë©´ openìœ¼ë¡œ ì½ê³ , dumpë¡œ ì €ì¥í–ˆìœ¼ë©´ loadë¡œ ì½ìœ¼ë©´ ë©ë‹ˆë‹¤ !!**

